# ===========================================
# RAG Chatbot Configuration
# ===========================================
# Copy this file to .env and fill in your values

# -------------------------------------------
# LLM Configuration
# -------------------------------------------
# OpenAI API key (required for OpenAI provider)
OPENAI_API_KEY=sk-your-openai-api-key-here

# LLM model to use (default: gpt-4)
# Options: gpt-4, gpt-4-turbo, gpt-3.5-turbo, or any OpenAI model
LLM_MODEL=gpt-4

# LLM provider (default: openai)
# Options: openai, ollama
LLM_PROVIDER=openai

# Response creativity (0.0 = deterministic, 1.0 = creative)
LLM_TEMPERATURE=0.7

# Maximum tokens in response
LLM_MAX_TOKENS=2048

# -------------------------------------------
# Ollama Configuration (if using local LLM)
# -------------------------------------------
# Ollama base URL (default: http://localhost:11434)
# Use http://host.docker.internal:11434 when running in Docker
OLLAMA_BASE_URL=http://localhost:11434

# Ollama model name (for LLM)
OLLAMA_MODEL=llama3.2

# -------------------------------------------
# Embedding Configuration
# -------------------------------------------
# Embedding model
# - OpenAI: text-embedding-ada-002, text-embedding-3-small, text-embedding-3-large
# - Ollama: bge-m3 (recommended for multilingual/Indonesian), nomic-embed-text
# - HuggingFace: sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_MODEL=bge-m3

# Embedding provider (default: ollama)
# Options: openai, huggingface, ollama
EMBEDDING_PROVIDER=ollama

# HuggingFace embedding model (if using huggingface provider)
HUGGINGFACE_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# -------------------------------------------
# ChromaDB Configuration
# -------------------------------------------
# ChromaDB host (default: localhost for dev, chromadb for docker)
CHROMA_HOST=localhost

# ChromaDB port (default: 8000)
CHROMA_PORT=8000

# ChromaDB collection name (default: documents)
CHROMA_COLLECTION=documents

# ChromaDB persistence directory (for local mode)
CHROMA_PERSIST_DIRECTORY=./data/chroma

# Use ChromaDB in-memory mode (default: false)
CHROMA_IN_MEMORY=false

# -------------------------------------------
# Document Processing Configuration
# -------------------------------------------
# Chunk size in characters (default: 1000)
CHUNK_SIZE=1000

# Chunk overlap in characters (default: 200)
CHUNK_OVERLAP=200

# Maximum file size for upload in MB (default: 50)
MAX_FILE_SIZE_MB=50

# -------------------------------------------
# Retrieval Configuration
# -------------------------------------------
# Number of documents to retrieve (default: 4)
RETRIEVAL_K=4

# Use Maximum Marginal Relevance for diversity (default: true)
USE_MMR=true

# MMR diversity factor (0.0 = max relevance, 1.0 = max diversity)
MMR_DIVERSITY=0.5

# Use reranking (default: false)
USE_RERANKER=false

# Reranker model
RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# -------------------------------------------
# MCP Server Configuration
# -------------------------------------------
# MCP server port (default: 3000)
MCP_SERVER_PORT=3000

# MCP transport type (default: stdio)
# Options: stdio, sse
MCP_TRANSPORT=stdio

# MCP server name
MCP_SERVER_NAME=rag-chatbot

# -------------------------------------------
# API Configuration
# -------------------------------------------
# API server port (default: 8080)
API_PORT=8080

# API host (default: 0.0.0.0)
API_HOST=0.0.0.0

# Enable CORS (default: true)
CORS_ENABLED=true

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# API rate limit per minute (default: 60)
API_RATE_LIMIT=60

# -------------------------------------------
# Redis Configuration (Optional)
# -------------------------------------------
# Redis host (default: localhost for dev, redis for docker)
REDIS_HOST=localhost

# Redis port (default: 6379)
REDIS_PORT=6379

# Redis password (optional)
REDIS_PASSWORD=

# Redis database number (default: 0)
REDIS_DB=0

# Enable Redis caching (default: false)
REDIS_ENABLED=false

# Session TTL in seconds (default: 3600 = 1 hour)
SESSION_TTL=3600

# -------------------------------------------
# Logging Configuration
# -------------------------------------------
# Log level (default: INFO)
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format (default: json for production)
# Options: json, console
LOG_FORMAT=json

# Enable debug mode (default: false)
DEBUG=false

# -------------------------------------------
# Docker Port Mapping Configuration
# -------------------------------------------
# These control the HOST ports that Docker maps to container ports
# Useful when you have port conflicts or want to run on different ports

# API host port (maps to container port 8080)
API_HOST_PORT=8080

# ChromaDB host port (maps to container port 8000)
CHROMA_HOST_PORT=8000

# MCP server host port (maps to container port 3000)
MCP_HOST_PORT=3000

# Redis host port (maps to container port 6379)
REDIS_HOST_PORT=6379

# -------------------------------------------
# Docker Configuration
# -------------------------------------------
# Docker restart policy (default: unless-stopped)
# Options: no, always, on-failure, unless-stopped
RESTART_POLICY=unless-stopped

# ChromaDB anonymized telemetry (default: TRUE)
CHROMA_ANONYMIZED_TELEMETRY=TRUE

# -------------------------------------------
# Application Configuration
# -------------------------------------------
# Application environment
# Options: development, staging, production
ENVIRONMENT=development

# Application name
APP_NAME=rag-chatbot

# Enable health check endpoint (default: true)
HEALTH_CHECK_ENABLED=true
